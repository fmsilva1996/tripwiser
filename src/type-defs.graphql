import { gql } from 'apollo-server';

export default gql`
  schema {
    query: Query
    mutation: Mutation
  }

  type Query {
    login(email: String!, password: String!): User!
  }

  type Mutation {
    register(
      email: String!
      password: String!
      firstName: String!
      lastName: String!
      phoneNumber: Int
    ): User
    updateUser(
      email: String!
      password: String
      firstName: String
      lastName: String
      phoneNumber: Int
    ): User
    updateTrips(email: String!, trip: TripInput): TripList
  }

  type User {
    _id: ID!
    email: String!
    password: String!
    firstName: String
    lastName: String!
    phoneNumber: Int
    favouritedTrips: [Trip!]
    bookedTrips: [Trip!]
  }

  type TripList {
    _id: ID
    favouritedTrips: [Trip]
    bookedTrips: [Trip]
  }

  type Trip {
    _id: ID!
    booked: Boolean!
    startLocation: String!
    endLocation: String!
    startDate: String!
    destinations: String!
    flights: [Flight]
    price: Int
  }

  type Flight {
    _id: ID!
    origin: String!
    destination: String!
    departureDate: String!
    arrivalDate: String!
    airline: String!
    price: Int!
  }

  type Destination {
    _id: ID!
    airport: String!
    aiportCode: String!
    city: String!
    country: String!
  }

  input TripInput {
    _id: ID!
    booked: Boolean!
    startLocation: String!
    endLocation: String!
    startDate: String!
    destinations: String!
    flights: [FlightInput]
    price: Int
  }

  input FlightInput {
    _id: ID!
    origin: String!
    destination: String!
    departureDate: String!
    arrivalDate: String!
    airline: String!
    price: Int!
  }

  input DestinationInput {
    _id: ID!
    airport: String!
    aiportCode: String!
    city: String!
    country: String!
  }
`